"use strict";(()=>{var e={};e.id=327,e.ids=[327],e.modules={5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},3873:e=>{e.exports=require("path")},6762:(e,r)=>{Object.defineProperty(r,"M",{enumerable:!0,get:function(){return function e(r,t){return t in r?r[t]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,t)):"function"==typeof r&&"default"===t?r:void 0}}})},7635:(e,r,t)=>{t.r(r),t.d(r,{config:()=>y,default:()=>P,routeModule:()=>A});var n={};t.r(n),t.d(n,{default:()=>m});var o=t(9947),s=t(2706),i=t(6762);let a=require("winston");var l=t.n(a),u=t(3873),c=t.n(u);let g=require("fs");var d=t.n(g);let f=c().join(process.cwd(),"logs");d().existsSync(f)||d().mkdirSync(f,{recursive:!0});let p=l().createLogger({level:"info",format:l().format.combine(l().format.timestamp(),l().format.json()),transports:[new(l()).transports.Console,new(l()).transports.File({filename:c().join(f,"error.log"),level:"error"}),new(l()).transports.File({filename:c().join(f,"app.log")})]});{let e=e=>{let r=new Date().toISOString().split("T")[0],t=c().join(f,`${e}-${r}.log`),n=c().join(f,`${e}.log`);d().existsSync(t)||d().writeFileSync(t,"");try{d().existsSync(n)&&d().unlinkSync(n),d().symlinkSync(t,n)}catch(e){console.error("Error creating symlink:",e)}};e("app"),e("error")}async function m(e,r){if("POST"!==e.method)return r.status(405).json({message:"Method not allowed"});try{let{level:t,message:n,metadata:o={},type:s}=e.body;if(!t||!n)return r.status(400).json({message:"Missing required fields"});let i={level:t,..."string"==typeof n?{message:n}:n,...o,type:s,timestamp:new Date().toISOString()};switch(t){case"info":default:p.info(i);break;case"error":p.error(i);break;case"warn":p.warn(i);break;case"debug":p.debug(i)}r.status(200).json({message:"Log recorded successfully"})}catch(e){console.error("Error logging message:",e),r.status(500).json({message:"Error logging message"})}}let P=(0,i.M)(n,"default"),y=(0,i.M)(n,"config"),A=new o.PagesAPIRouteModule({definition:{kind:s.A.PAGES_API,page:"/api/logger",pathname:"/api/logger",bundlePath:"",filename:""},userland:n})},2706:(e,r)=>{Object.defineProperty(r,"A",{enumerable:!0,get:function(){return t}});var t=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},9947:(e,r,t)=>{e.exports=t(5600)}};var r=require("../../webpack-api-runtime.js");r.C(e);var t=r(r.s=7635);module.exports=t})();